# virtualenv å®‰å…¨æ¼æ´ä¿®å¾©èˆ‡ Dependabot è¡Œç‚ºåˆ†æ

## å•é¡Œç™¼ç¾

### GitHub Actions å¤±æ•—
- **æ™‚é–“**: 2026-01-19
- **å¤±æ•— Job**: Code Quality & Tests
- **å¤±æ•—æ­¥é©Ÿ**: Dependency vulnerability scan (pip-audit)
- **GitHub Actions Run**: [#21121604858](https://github.com/kyomind/WeaMind/actions/runs/21121604858/job/60735339180?pr=72)

### éŒ¯èª¤è¨Šæ¯
```
Found 1 known vulnerability in 1 package
Name       Version ID                  Fix Versions
---------- ------- ------------------- ------------
virtualenv 20.35.4 GHSA-597g-3phw-6986 20.36.1

##[error]Process completed with exit code 1.
```

### å•é¡Œåˆ†æ
- `virtualenv` å¥—ä»¶ç‰ˆæœ¬ `20.35.4` å­˜åœ¨å®‰å…¨æ¼æ´
- æ¼æ´ç·¨è™Ÿ: [GHSA-597g-3phw-6986](https://github.com/advisories/GHSA-597g-3phw-6986)
- éœ€è¦å‡ç´šåˆ° `20.36.1` æˆ–æ›´é«˜ç‰ˆæœ¬

## ä¿®å¾©éç¨‹

### 1. ç¢ºèªä¾è³´éˆ
```bash
â¯ uv tree | grep -A 2 virtualenv
â””â”€â”€ virtualenv v20.35.4
    â”œâ”€â”€ distlib v0.4.0
    â”œâ”€â”€ filelock v3.20.3
```

**ç™¼ç¾**: `virtualenv` æ˜¯é–“æ¥ä¾è³´ï¼Œé€é `pre-commit` å¼•å…¥ï¼Œä¸åœ¨ `pyproject.toml` çš„ç›´æ¥ä¾è³´åˆ—è¡¨ä¸­ã€‚

### 2. å‡ç´šç‰¹å®šå¥—ä»¶
```bash
â¯ uv lock --upgrade-package virtualenv
Resolved 98 packages in 2.48s
Updated virtualenv v20.35.4 -> v20.36.1
```

### 3. åŒæ­¥è™›æ“¬ç’°å¢ƒ
```bash
â¯ uv sync
Audited 98 packages in 8ms
```

### 4. é©—è­‰æ›´æ–°
```bash
â¯ uv tree | grep -A 2 virtualenv
â””â”€â”€ virtualenv v20.36.1
    â”œâ”€â”€ distlib v0.4.0
    â”œâ”€â”€ filelock v3.20.3
```

### 5. æœ¬åœ°æ¸¬è©¦
```bash
â¯ uv run pip-audit --progress-spinner=off \
  --ignore-vuln=GHSA-xqrq-4mgf-ff32 \
  --ignore-vuln=GHSA-4xh5-x5gv-qwph

No known vulnerabilities found
```

### 6. æäº¤ä¿®å¾©
```bash
â¯ git add uv.lock
â¯ git commit -m "Fix security vulnerability in virtualenv (GHSA-597g-3phw-6986)"
â¯ git push
```

## Dependabot è¡Œç‚ºåˆ†æ

### ç‚ºä½• Dependabot æ²’æœ‰è‡ªå‹•å»ºç«‹ PRï¼Ÿ

#### æ ¹æœ¬åŸå› 
Dependabot **æ²’æœ‰ç‚º `virtualenv` æ¼æ´å»ºç«‹ PR** ä¸¦éé…ç½®å•é¡Œï¼Œè€Œæ˜¯å·¥å…·è¨­è¨ˆé™åˆ¶ï¼š

#### 1. é–“æ¥ä¾è³´çš„è™•ç†ç­–ç•¥
- **Dependabot ä¸»è¦åŠŸèƒ½**: ç›£æ§å’Œæ›´æ–°**ç›´æ¥ä¾è³´**ï¼ˆåœ¨ `pyproject.toml` ä¸­æ˜ç¢ºåˆ—å‡ºçš„å¥—ä»¶ï¼‰
- **é–“æ¥ä¾è³´è™•ç†**: é€šå¸¸ä¸æœƒä¸»å‹•å»ºç«‹æ›´æ–° PR
- **è¨­è¨ˆè€ƒé‡**: é¿å…ç”¢ç”Ÿéå¤š PR å’Œæ½›åœ¨çš„ç›¸å®¹æ€§å•é¡Œ

#### 2. uv.lock æª”æ¡ˆæ ¼å¼æ”¯æ´
- **å°ˆæ¡ˆå¥—ä»¶ç®¡ç†**: ä½¿ç”¨ `uv` (Python package and virtual environment manager)
- **Dependabot æ”¯æ´ç¯„åœ**: ä¸»è¦é‡å° `requirements.txt` å’Œ `pyproject.toml`
- **é–å®šæª”æ¡ˆ**: `uv.lock` æ˜¯ç›¸å°è¼ƒæ–°çš„æ ¼å¼ï¼ŒDependabot å°å…¶æ”¯æ´æœ‰é™

#### 3. æƒæé€±æœŸèˆ‡æ™‚é–“å·®
- **é…ç½®é »ç‡**: æ¯é€±æƒæä¸€æ¬¡ï¼ˆ`schedule: interval: "weekly"`ï¼‰
- **å¯èƒ½æƒ…æ³**:
  - æ–°ç‰ˆæœ¬ç™¼å¸ƒæ™‚é–“èˆ‡æƒæé€±æœŸå­˜åœ¨æ™‚é–“å·®
  - æ¼æ´å¯èƒ½ä¸åœ¨ GitHub Advisory Database é«˜å„ªå…ˆç´šåˆ—è¡¨

### Dependabot é…ç½®é©—è­‰

#### ç•¶å‰é…ç½®ï¼ˆ`.github/dependabot.yml`ï¼‰
```yaml
version: 2
updates:
  - package-ecosystem: "pip"
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    rebase-strategy: "auto"
    commit-message:
      prefix: "chore(deps)"
      include: "scope"
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    rebase-strategy: "auto"
    commit-message:
      prefix: "chore(actions)"
      include: "scope"
```

#### é…ç½®è©•ä¼°
- âœ… `pip` ecosystem æ­£ç¢ºç›£æ§ Python ä¾è³´
- âœ… `github-actions` ç›£æ§ Actions ç‰ˆæœ¬
- âœ… æ¯é€±è‡ªå‹•æƒææ©Ÿåˆ¶å•Ÿç”¨
- âœ… commit message æ ¼å¼ç¬¦åˆå°ˆæ¡ˆè¦ç¯„
- âœ… **é…ç½®å®Œæ•´ï¼Œç„¡ç¼ºå¤±é …ç›®**

### Dependabot æ­·å²æ´»å‹•
```bash
â¯ gh pr list --author "app/dependabot" --state all --limit 15

ID   TITLE                              BRANCH       CREATED AT
#73  chore(actions)(deps): bump ...     dependab...  about 4 hours ago
#72  chore(actions)(deps): bump ...     dependab...  about 4 hours ago
#69  chore(actions)(deps): bump ...     dependab...  about 28 days ago
#68  chore(actions)(deps): bump ...     dependab...  about 1 month ago
...
```

**è§€å¯Ÿ**: Dependabot æŒçºŒæ­£å¸¸é‹ä½œï¼Œä¸»è¦é‡å° GitHub Actions å’Œç›´æ¥ä¾è³´å»ºç«‹ PRã€‚

## å¤šå±¤é˜²è­·ç­–ç•¥

### æ¶æ§‹è¨­è¨ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä¾è³´å®‰å…¨ç›£æ§æ¶æ§‹                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ç¬¬ä¸€å±¤ï¼šDependabot                                          â”‚
â”‚  â”œâ”€ ç›£æ§ç¯„åœï¼šç›´æ¥ä¾è³´ (pyproject.toml)                      â”‚
â”‚  â”œâ”€ æƒæé »ç‡ï¼šæ¯é€±                                           â”‚
â”‚  â””â”€ è™•ç†æ–¹å¼ï¼šè‡ªå‹•å»ºç«‹ PR                                     â”‚
â”‚                                                             â”‚
â”‚  ç¬¬äºŒå±¤ï¼špip-audit (CI)                                      â”‚
â”‚  â”œâ”€ ç›£æ§ç¯„åœï¼šæ‰€æœ‰ä¾è³´ï¼ˆç›´æ¥ + é–“æ¥ï¼‰                         â”‚
â”‚  â”œâ”€ æƒæé »ç‡ï¼šæ¯æ¬¡ CI åŸ·è¡Œ                                    â”‚
â”‚  â””â”€ è™•ç†æ–¹å¼ï¼šå¤±æ•—å³é˜»æ­¢åˆä½µ              â† æœ¬æ¬¡æˆåŠŸæ””æˆª      â”‚
â”‚                                                             â”‚
â”‚  ç¬¬ä¸‰å±¤ï¼šå®šæœŸæ‰‹å‹•æ›´æ–°                                         â”‚
â”‚  â”œâ”€ æ›´æ–°æŒ‡ä»¤ï¼šuv lock --upgrade                             â”‚
â”‚  â”œâ”€ åŸ·è¡Œé »ç‡ï¼šå­£åº¦æˆ–åŠå¹´                                      â”‚
â”‚  â””â”€ è™•ç†æ–¹å¼ï¼šå…¨é‡ä¾è³´æ›´æ–°                                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å„å±¤è·è²¬

#### ç¬¬ä¸€å±¤ï¼šDependabotï¼ˆç›´æ¥ä¾è³´ï¼‰
- **å„ªå‹¢**: è‡ªå‹•åŒ–ç¨‹åº¦é«˜ï¼Œç„¡éœ€äººå·¥ä»‹å…¥
- **é™åˆ¶**: åƒ…è™•ç†ç›´æ¥ä¾è³´
- **é©ç”¨å ´æ™¯**: æ—¥å¸¸ä¾è³´ç‰ˆæœ¬æ›´æ–°

#### ç¬¬äºŒå±¤ï¼špip-auditï¼ˆæ‰€æœ‰ä¾è³´ï¼‰
- **å„ªå‹¢**: è¦†è“‹ç¯„åœå®Œæ•´ï¼ŒåŒ…å«é–“æ¥ä¾è³´
- **ç‰¹é»**: èˆ‡ CI æ•´åˆï¼Œå¼·åˆ¶æª¢æŸ¥
- **é©ç”¨å ´æ™¯**: å®‰å…¨æ¼æ´çš„æœ€å¾Œä¸€é“é˜²ç·š

#### ç¬¬ä¸‰å±¤ï¼šå®šæœŸæ‰‹å‹•æ›´æ–°ï¼ˆä¸»å‹•ç¶­è­·ï¼‰
- **å„ªå‹¢**: å¯æ§åˆ¶æ›´æ–°æ™‚æ©Ÿå’Œç¯„åœ
- **ç‰¹é»**: éœ€è¦äººå·¥åˆ¤æ–·å’Œæ¸¬è©¦
- **é©ç”¨å ´æ™¯**: å¤§ç‰ˆæœ¬æ›´æ–°ã€æŠ€è¡“å‚µè™•ç†

## æœ€ä½³å¯¦è¸ç¸½çµ

### 1. ä¾è³´æ›´æ–°ç­–ç•¥

#### é‡å°æ€§æ›´æ–°ï¼ˆæ¨è–¦ç”¨æ–¼ç·Šæ€¥ä¿®å¾©ï¼‰
```bash
# æ›´æ–°ç‰¹å®šå¥—ä»¶
uv lock --upgrade-package <package-name>
uv sync

# é©—è­‰æ›´æ–°
uv tree | grep <package-name>
```

#### å…¨é‡æ›´æ–°ï¼ˆæ¨è–¦ç”¨æ–¼å®šæœŸç¶­è­·ï¼‰
```bash
# æ›´æ–°æ‰€æœ‰ä¾è³´
uv lock --upgrade
uv sync

# åŸ·è¡Œå®Œæ•´æ¸¬è©¦
uv run pytest
```

### 2. Makefile æ•´åˆ

å»ºè­°åœ¨ `Makefile` ä¸­åŠ å…¥æ›´æ–°æŒ‡ä»¤ï¼š

```makefile
# æ›´æ–°ç‰¹å®šå¥—ä»¶
upgrade-package:
	@read -p "è¼¸å…¥å¥—ä»¶åç¨±: " pkg; \
	uv lock --upgrade-package $$pkg && \
	uv sync && \
	echo "âœ… $$pkg å·²æ›´æ–°"

# æ›´æ–°æ‰€æœ‰ä¾è³´
update-deps:
	@echo "ğŸ“¦ æ›´æ–°æ‰€æœ‰ä¾è³´..."
	@uv lock --upgrade
	@uv sync
	@echo "âœ… ä¾è³´æ›´æ–°å®Œæˆ"
	@echo "âš ï¸  è«‹åŸ·è¡Œæ¸¬è©¦ç¢ºèªç›¸å®¹æ€§"
```

### 3. CI é…ç½®ä¿æŒ

ç•¶å‰ GitHub Actions é…ç½®å·²ç¶“å¾ˆå®Œå–„ï¼š

```yaml
- name: Dependency vulnerability scan (pip-audit)
  run: |
    uv run pip-audit \
      --progress-spinner=off \
      --ignore-vuln=GHSA-xqrq-4mgf-ff32 \
      --ignore-vuln=GHSA-4xh5-x5gv-qwph
```

### 4. å®šæœŸç¶­è­·é€±æœŸ

| é »ç‡    | æ´»å‹•                | ç¯„åœ              |
| ------- | ------------------- | ----------------- |
| æ¯é€±    | Dependabot è‡ªå‹•æƒæ | ç›´æ¥ä¾è³´          |
| æ¯æ¬¡ CI | pip-audit æª¢æŸ¥      | æ‰€æœ‰ä¾è³´          |
| å­£åº¦    | æ‰‹å‹•æ›´æ–° + æ¸¬è©¦     | é–“æ¥ä¾è³´          |
| åŠå¹´    | å…¨é‡æ›´æ–° + é‡æ§‹     | æ‰€æœ‰ä¾è³´ + æŠ€è¡“å‚µ |

## é—œéµå­¸ç¿’

### 1. Dependabot ä¸æ˜¯è¬èƒ½çš„
- âœ… æ“…é•·ï¼šç›´æ¥ä¾è³´çš„è‡ªå‹•åŒ–ç®¡ç†
- âŒ é™åˆ¶ï¼šé–“æ¥ä¾è³´éœ€è¦å…¶ä»–æ‰‹æ®µè£œå……

### 2. å¤šå±¤é˜²è­·çš„å¿…è¦æ€§
- å–®ä¸€å·¥å…·ç„¡æ³•è¦†è“‹æ‰€æœ‰å ´æ™¯
- çµ„åˆä½¿ç”¨æ‰èƒ½å»ºç«‹å®Œæ•´çš„å®‰å…¨ç¶²

### 3. CI æ˜¯æœ€å¾Œä¸€é“é˜²ç·š
- pip-audit åœ¨ CI ä¸­çš„è§’è‰²è‡³é—œé‡è¦
- æœ¬æ¬¡æˆåŠŸæ””æˆªè­‰æ˜äº†é€™å€‹è¨­è¨ˆçš„æœ‰æ•ˆæ€§

### 4. å·¥å…·ç†è§£æ¯”ç›²ç›®é…ç½®é‡è¦
- ç†è§£å·¥å…·çš„è¨­è¨ˆé™åˆ¶
- æ ¹æ“šé™åˆ¶è¨­è¨ˆè£œå……æ–¹æ¡ˆ
- é¿å…å°å–®ä¸€å·¥å…·ç”¢ç”Ÿéåº¦ä¾è³´

## çµè«–

### å•é¡Œå®šæ€§
é€™**ä¸æ˜¯é…ç½®ç¼ºå¤±**ï¼Œè€Œæ˜¯ï¼š
- Dependabot çš„**è¨­è¨ˆé™åˆ¶**ï¼ˆä¸»è¦è™•ç†ç›´æ¥ä¾è³´ï¼‰
- `virtualenv` ä½œç‚º**é–“æ¥ä¾è³´**ï¼ˆé€é `pre-commit` å¼•å…¥ï¼‰
- `uv.lock` çš„**å·¥å…·æ”¯æ´åº¦**ï¼ˆDependabot æ”¯æ´æœ‰é™ï¼‰

### ç•¶å‰ç‹€æ…‹è©•ä¼°
- âœ… Dependabot é…ç½®æ­£ç¢ºä¸”å®Œæ•´
- âœ… pip-audit æˆåŠŸç™¼æ®ä½œç”¨
- âœ… å¤šå±¤é˜²è­·ç­–ç•¥æœ‰æ•ˆé‹ä½œ
- âœ… å¿«é€Ÿä¿®å¾©æµç¨‹é †æš¢

### æœªä¾†ç¶­è­·å»ºè­°
1. **ä¿æŒç•¶å‰é…ç½®**: ç„¡éœ€èª¿æ•´ Dependabot è¨­å®š
2. **ä¿¡ä»» CI æµç¨‹**: pip-audit æ˜¯é–“æ¥ä¾è³´çš„å®ˆé–€å“¡
3. **å®šæœŸä¸»å‹•æ›´æ–°**: å­£åº¦åŸ·è¡Œ `uv lock --upgrade`
4. **æŒçºŒç›£æ§æ”¹é€²**: é—œæ³¨ uv å’Œ Dependabot çš„åŠŸèƒ½æ¼”é€²

---

## é™„éŒ„

### ç›¸é—œæ¼æ´è³‡è¨Š
- **æ¼æ´ç·¨è™Ÿ**: GHSA-597g-3phw-6986
- **å½±éŸ¿ç‰ˆæœ¬**: virtualenv < 20.36.1
- **ä¿®å¾©ç‰ˆæœ¬**: virtualenv >= 20.36.1
- **ç™¼ç¾æ—¥æœŸ**: 2026-01-19
- **ä¿®å¾©æ™‚é–“**: < 1 å°æ™‚

### ç›¸é—œæ–‡ä»¶
- [Security Scanning Configuration](./security-scan.md)
- [Makefile å®‰å…¨æƒææŒ‡ä»¤ä½¿ç”¨èªªæ˜](./makefile-commands-guide.md)
- [WeaMind å®‰å…¨æƒæå¯¦ä½œé‡é»](./implementation-highlights.md)
- [Dependabot é…ç½®](.github/dependabot.yml)

### è®Šæ›´è¨˜éŒ„
- **2026-01-19**: åˆå§‹ç‰ˆæœ¬ï¼Œè¨˜éŒ„ virtualenv å®‰å…¨æ¼æ´ä¿®å¾©èˆ‡ Dependabot è¡Œç‚ºåˆ†æ
